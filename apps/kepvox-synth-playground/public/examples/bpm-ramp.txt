const context = PLAYGROUND_CONTEXT

const oscillator = new OscillatorSynthNode(context)
const envelope = new ADSREnvelopeSynthNode(context)
const output = OutputSynthNode.ofContext(context)

oscillator.connectOutput(envelope)
envelope.connectOutput(output)

oscillator.frequency.initialValue = 440
oscillator.waveShape.value = 'sawtooth'
envelope.attack.initialValue = 1
envelope.decay.initialValue = 1
envelope.sustain.initialValue = 0.5
envelope.release.initialValue = 1

let time = context.firstBeat
for (let i = 0; i < 5; i++) {
  envelope.attackAt(time)
  time = time.add({ note: 1 })
  envelope.releaseAt(time)
  time = time.add({ beat: 1 })
  oscillator.frequency.curve.rampValueUntil(time, 440 + 40 * i)
  context.secondsPerBeat.rampValueUntil(time, 1 / (i + 1))
}
